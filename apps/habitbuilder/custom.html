<html>
  <head>
    <link rel="stylesheet" href="../../css/spectre.min.css">
  </head>
  <body>
    Choose up to 5 yes/no questions to ask yourself each day, and a time to be 
    notified. You will be able to change these settings later in the App Loader.
    <br><br>
    <div id="settings"></div>
    <p><button id="upload" class="btn btn-primary">Upload</button></p>

    <script src="../../core/lib/customize.js"></script>
    <script src="settings-form.js"></script>

    <script>
      const settingsElement = document.getElementById("settings");
      settingsElement.innerHTML = buildSettingsForm();

      // When the 'upload' button is clicked...
      document.getElementById("upload").addEventListener("click", function() {

        const settings = getSettingsFromForm();
        const content = JSON.stringify(settings);

        sendCustomizedApp({
          storage:[
            {name:"habitbuilder.settings.json", content },
          ]
        });

        // Reload so that we see the changes and can edit in App Loader
        location.reload();
      });

    </script>
  </body>
</html>
